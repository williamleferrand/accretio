{"version":3,"file":"build/js/darkroom.min.js","sources":["build/lib/js/darkroom.js","build/lib/js/plugins/darkroom.history.js","build/lib/js/plugins/darkroom.rotate.js","build/lib/js/plugins/darkroom.crop.js","build/lib/js/plugins/darkroom.save.js"],"names":["window","document","fabric","extend","b","a","prop","undefined","hasOwnProperty","Darkroom","element","options","plugins","this","init","Plugin","darkroom","defaults","initialize","Toolbar","actionsElement","querySelector","ButtonGroup","Button","prototype","protoProps","child","parent","constructor","apply","arguments","Surrogate","__super__","createButtonGroup","buttonGroup","createElement","className","appendChild","createButton","image","type","group","hide","disabled","button","innerHTML","disable","addEventListener","eventName","callback","el","attachEvent","active","value","classList","add","remove","Canvas","util","createClass","minWidth","minHeight","maxWidth","maxHeight","canvas","getElement","dispatchEvent","event","createEvent","initEvent","_this","Image","onload","createFabricImage","initDOM","initPlugins","bind","call","src","toolbar","canvasContainer","container","parentNode","replaceChild","selection","backgroundColor","setWidth","getWidth","setHeight","getHeight","centerObject","setCoords","imgElement","width","height","scaleMin","scaleMax","scaleX","scaleY","Math","min","max","scale","selectable","evented","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasBorders","setScaleX","setScaleY","name","plugin","getPlugin","selfDestroy","snapshotImage","toDataURL","_initButtons","backHistoryStack","forwardHistoryStack","_snapshotImage","_onImageChange","goBack","length","push","currentImage","pop","_applyImage","_updateButtons","goForward","backButton","forwardButton","imgInstance","leftButton","rightButton","rotateLeft","rotateRight","rotate","angle","getAngle","abs","renderAll","CropZone","Rect","_render","ctx","callSuper","dashWidth","flipX","flipY","fillStyle","_renderOverlay","setLineDash","mozDash","strokeStyle","_renderBorders","_renderGrid","lineDashOffset","borderOffset","x0","ceil","getLeft","x1","x2","x3","y0","getTop","y1","y2","y3","fillRect","beginPath","moveTo","lineTo","stroke","startX","startY","isKeyCroping","isKeyLeft","isKeyUp","ratio","quickCropKey","cropButton","okButton","cancelButton","toggleCrop","cropCurrentZone","releaseFocus","on","onMouseDown","onMouseMove","onMouseUp","onObjectMoving","onObjectScaling","addListener","onKeyDown","onKeyUp","hasFocus","currentObject","target","cropZone","x","y","w","h","maxX","maxY","set","preventScaling","pointer","getPointer","e","minX","minY","lastScaleX","setLeft","lastScaleY","setTop","scaleToWidth","scaleToHeight","getScaleX","getScaleY","calcOffset","point","Point","activeObject","getActiveObject","containsPoint","discardActiveObject","onMouseMoveKeyCrop","_renderCropZone","zone","left","top","setActiveObject","keyCode","selectZone","forceDimension","requireFocus","bringToFront","visible","fill","originX","originY","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","defaultCursor","fromX","fromY","toX","toY","isRight","isLeft","isDown","isUp","leftX","rightX","topY","bottomY","currentRatio","newWidth","newHeight","destroyButton"],"mappings":"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"}